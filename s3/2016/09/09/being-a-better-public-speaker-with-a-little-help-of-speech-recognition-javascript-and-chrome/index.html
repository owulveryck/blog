<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome  &middot; Olivier Wulveryck&#39;s Tech Blog</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="People who know what they are talking about don&#39;t need Powerpoint said Steve Jobs. Indeed, it may be useful from time to time to have a single slide to display key words. But what I understand from Jobs&#39;s sentence is that relying on the slides is a bad idea. Good stuff that machine learning can pilot the slides for us!" />

<meta name="keywords" content="chrome, speech recognition, Javascript, reveal.js, slides, ">

<link rel="author" href="http://plus.google.com/+olivier.wulveryck">


<meta property="og:title" content="Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome  &middot; Olivier Wulveryck&#39;s Tech Blog ">
<meta property="og:site_name" content="Olivier Wulveryck&#39;s Tech Blog"/>
<meta property="og:url" content="https://blog.owulveryck.info/2016/09/09/being-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome/index.html" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content="People who know what they are talking about don&#39;t need Powerpoint said Steve Jobs. Indeed, it may be useful from time to time to have a single slide to display key words. But what I understand from Jobs&#39;s sentence is that relying on the slides is a bad idea. Good stuff that machine learning can pilot the slides for us!"/>
<meta property="og:article:published_time" content="2016-09-09T13:39:50&#43;02:00" />
<meta property="og:article:modified_time" content="2016-09-09T13:39:50&#43;02:00" />

  
    
<meta property="og:article:tag" content="chrome">
    
<meta property="og:article:tag" content="speech recognition">
    
<meta property="og:article:tag" content="Javascript">
    
<meta property="og:article:tag" content="reveal.js">
    
<meta property="og:article:tag" content="slides">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@owulveryck" />
<meta name="twitter:creator" content="@owulveryck" />
<meta name="twitter:title" content="Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome" />
<meta name="twitter:description" content="People who know what they are talking about don&#39;t need Powerpoint said Steve Jobs. Indeed, it may be useful from time to time to have a single slide to display key words. But what I understand from Jobs&#39;s sentence is that relying on the slides is a bad idea. Good stuff that machine learning can pilot the slides for us!" />
<meta name="twitter:url" content="https://blog.owulveryck.info/2016/09/09/being-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome/index.html" />
<meta name="twitter:domain" content="https://blog.owulveryck.info/">
  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+olivier.wulveryck?rel=author"
    },
    "datePublished": "2016-09-09",
    "description": "People who know what they are talking about don\x27t need Powerpoint said Steve Jobs. Indeed, it may be useful from time to time to have a single slide to display key words. But what I understand from Jobs\x27s sentence is that relying on the slides is a bad idea. Good stuff that machine learning can pilot the slides for us!",
    "wordCount":  867 
  }
</script>



<link rel="canonical" href="https://blog.owulveryck.info/2016/09/09/being-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome/index.html" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.owulveryck.info/touch-icon-144-precomposed.png">
<link href="https://blog.owulveryck.info/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.16" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->



    <link rel="stylesheet" href="https://blog.owulveryck.info/css/theme/default.css">


<link rel="stylesheet" href="https://blog.owulveryck.info/css/font-awesome.min.css">
<link rel="stylesheet" href="https://blog.owulveryck.info/css/style.css">


  <link rel="stylesheet" href="https://blog.owulveryck.info/css/highlight/default.css">


<script type="text/x-mathjax-config"> MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}}); </script>
<script src='http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
</head>
<body>
    <header id="main-header">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="https://blog.owulveryck.info/">Olivier Wulveryck&#39;s Tech Blog</a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          
          <li>

            <a href="https://blog.owulveryck.info/about/index.html"
            >

            
                <i class="fa fa-info-circle"></i>
            
            
            About
            </a>
          </li>
          
          <li>

            <a href="https://blog.owulveryck.info/post/index.html"
             title="Show list of posts">

            
            
            Posts
            </a>
          </li>
          
          <li>

            <a href="https://blog.owulveryck.info/tags/index.html"
             title="Show list of tags">

            
            
            Tags
            </a>
          </li>
          
        </ul>
      </div>
      
    </div>
  </nav>

</header>


<div class="container">
<div class="row">

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <div class="text-center">

    <h1>Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome
</h1>

    <div class="metas">
<small>
  <i class="fa fa-calendar"></i>
  <time datetime="2016-09-09">9 Sep, 2016</time>
</small>


  <small>
    &middot; by Olivier Wulveryck
  
  &middot; Read in about 5 min
  &middot; (867 Words)
</small>


<div class="margin-10">
  <i class="fa fa-tags"></i>
  
  <a href="https://blog.owulveryck.info/tags/chrome" class="label label-primary">chrome</a>
  
  <a href="https://blog.owulveryck.info/tags/speech-recognition" class="label label-primary">speech recognition</a>
  
  <a href="https://blog.owulveryck.info/tags/javascript" class="label label-primary">Javascript</a>
  
  <a href="https://blog.owulveryck.info/tags/reveal.js" class="label label-primary">reveal.js</a>
  
  <a href="https://blog.owulveryck.info/tags/slides" class="label label-primary">slides</a>
  


</div>
<br>
</div>

  </div>
</div>

  <div class="container content">
  

<h1 id="introduction">Introduction</h1>

<p>I usually don&rsquo;t like slidewares.</p>

<p>Actually as IT engineer working, by now, exclusively in France, I&rsquo;m facing the PowerPoint problem:</p>

<ul>
<li>Too many boring slides,</li>
<li>too much information per slide,</li>
<li>a presenter dedicated to read their content.</li>
</ul>

<p>Therefore, the audience is watching its watch while waiting for a coffee break.</p>

<p>I won&rsquo;t redo the introduction I already did in a <a href="/2016/06/23/websockets-reveal.js-d3-and-go-for-a-dynamic-keynote/index.html">previous post</a> but indeed slides can,
from time to time, be a value-add to a presentation.</p>

<p>Is the previous post, I introduced reveal.js, this excellent javascript framework. And I already did an interactive presentation.</p>

<p>In this post, I will go a little bit further with the integration of Speech Recognition.</p>

<h1 id="speech-recognition-by-google">Speech Recognition by Google</h1>

<h2 id="the-google-cloud-speech-api">The Google Cloud Speech API</h2>

<p>It ain&rsquo;t no secret now, I&rsquo;m a big fan of machine learning.
Machines learn faster than people, and they can now assist us in a lot of boring tasks.</p>

<p>On the base of a neuron network, Google provides an <a href="https://cloud.google.com/speech/">API for speech recognition</a>.
It is fairly complete and multi lingual.</p>

<h2 id="chrome-speech-recognition">Chrome speech recognition</h2>

<p>They &ldquo;<em>eat their own dog food</em>&rdquo; and use their engine for android and&hellip; Chrome.
Best of all, they provide a userland access via a Javascript API to this functionality in Chrome.</p>

<p>This means that you can develop a web page that will access you microphone, sends what you say to the Google cloud, get the result back and process it in your page.</p>

<p>You can see an introduction <a href="https://developers.google.com/web/updates/2013/01/Voice-Driven-Web-Apps-Introduction-to-the-Web-Speech-API">here</a></p>

<h1 id="what-can-i-use-that-for-a-case-study">What can I use that for: A case study?</h1>

<p>I had to do a presentation recently.
This presentation was about <em>Agility</em> and <em>Devops</em>. The main idea was to give my client a feedback about experiences I had regarding those principles in digital transformation.</p>

<p>I didn&rsquo;t want to loose my audience with slides. But I wanted to keep the key concepts alive and visible.</p>

<p>So what I did was a one slide presentation only with the keywords I wanted to talk about.</p>

<p>The day before, I though:</p>

<blockquote>
<p>&ldquo;How nice it would be if as far as I speak, the key concepts would appear on screen&hellip;&rdquo;</p>
</blockquote>

<p>You may think: <em>&ldquo;that&rsquo;s easy, learn your script and click on the right moment&rdquo;</em>.</p>

<p>Ok, but there are drawbacks:</p>

<ul>
<li>You have to learn the script</li>
<li>You cannot be spontaneous anymore</li>
<li>It&rsquo;s a one shot, one displayed, you cannot interact with the points anymore.</li>
</ul>

<p>What I need is &ldquo;an assistant&rdquo; that will <em>listen to me</em> and <em>act as soon as he/she/it hear a buzz word</em>.
It&rsquo;s 2016, this assistant is a machine, and I can teach it to act correctly.</p>

<p>Here is a little demo of the end product (don&rsquo;t pay to much attention to the content, I said nonsense for the demo)</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/MOmmBufEwPo" frameborder="0" allowfullscreen></iframe>

<p>And another one in French.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/3Uyr0G0add4" frameborder="0" allowfullscreen></iframe>

<h1 id="the-implementation">The implementation</h1>

<h2 id="annyang">Annyang</h2>

<p>I have used the <a href="https://github.com/TalAter/annyang">annyang</a> which is a javascript wrapper for the Chrome speech recognition functionnality.</p>

<p>Instead of matching a sentence as explained in the example of annyang, I made it listen to my whole speech in a loop.
Then I passed every sentence detected by the framework to a javascript function that was applying regexp to look for keywords.</p>

<h3 id="displaying-words">Displaying words</h3>

<p>For every keyword I did a match to an object of my DOM and simply changed its <code>visibility</code> style from <code>hidden</code> to <code>visible</code></p>

<p>Here is the javascript code:</p>

<pre><code class="language-javascript">if (annyang) {
  annyang.debug(true);
  annyang.setLanguage('fr-FR');
  annyang.addCallback('result', function(phrases) {
  for (s of phrases) {
     str = s.toLowerCase();
     switch (str) {
        case (str.match(/communication/) || {}).input:nnyang.start();                                                                                              
        document.getElementById('communication').style.visibility = 'visible';
        ...
    // Start listening. You can call this here, or attach this call to an event, button, etc.
    annyang.start();       
    ...
</code></pre>

<p>And the corresponding html section for the communication keyword:</p>

<pre><code class="language-html">&lt;div class=&quot;reveal&quot;&gt;
  &lt;div class=&quot;slides&quot;&gt;
    &lt;section&gt;
      &lt;h3 style=&quot;visibility: visible&quot; id=&quot;agile&quot;&gt;Agile&lt;/h3&gt;
      &lt;p&gt; &lt;span style=&quot;visibility: hidden;&quot; id=&quot;communication&quot;&gt;communication&lt;/span&gt; &lt;/p&gt;            
</code></pre>

<p>The speech recognition engine detects the sentence and gives a confidence note about its recognition.
All the potential results are stored in an array (here <code>phrases</code>). I&rsquo;ve used them all so I was more confident not to miss a word.</p>

<h3 id="making-them-blink">Making them blink</h3>

<p>As I was not fully confident in the solution (it was late in the night and the show was the next morning), Therefore I made a fall-back solution.
All the words were displayed, and I used a little CSS tweak to make them blink when they were pronounced.
This was done by adding and removing a css class to the concerned node.
The logic remains the same.</p>

<pre><code class="language-css">/* Chrome &amp; Safari */
@-webkit-keyframes blink {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.blink {
  -webkit-animation: blink 750ms 2;
}
</code></pre>

<pre><code class="language-Javascript">case (str.match(/communication/) || {}).input:                                                                                       
   document.getElementById(&quot;b_communication&quot;).classList.toggle('blink');
   setTimeout(function () {
     document.getElementById(&quot;b_communication&quot;).classList.remove('blink');
   }, 1500);
   break;
</code></pre>

<h1 id="conclusion-and-todo">Conclusion and TODO</h1>

<p>The speech recognition engine is efficient and usable.
What I need to do is to code a tiny javascript library in order to get a JSON associative array between the list of spoken words that would trigger an action for an element for example:</p>

<pre><code class="language-json">{
  &quot;tag&quot;: &quot;communication&quot;,
  &quot;words&quot;: [&quot;communication&quot;, &quot;communicate&quot;],
  &quot;fuction&quot;: &quot;blink&quot;
}
</code></pre>

<p>Anyway, as a quick and dirty solution, the goal is achieved.</p>

<p>Another Idea would be to plug this with a NLP engine to perform stemming or lemmatization to do a better decoding and be even more machine learning compliant. This could be done with the help of <a href="https://github.com/mit-nlp/MITIE">MITIE</a></p>

</div>


  <footer>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="https://blog.owulveryck.info/2016/08/29/getting-weather-data-from-the-station-to-the-raspberry/index.html" title="Getting weather data from the station to the raspberry">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  
<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//owulveryck.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>

</footer>


</div>
</div>
      <footer class="footer">
    <div class="container hidden-print">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="#">back to top</a>
</div>
<div class="pull-right">
  
</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
          <small>
              
    
<div class="container footline">
  

</div>


    
<div class="container copyright">
  
  All rights reserved - <sup>2015</sup>&frasl;<sub>2016</sub>


</div>



          </small>
        </div>
     </div>
    </div>
</footer>

    <script src="https://blog.owulveryck.info/js/jquery.min-2.1.4.js"></script>
<script src="https://blog.owulveryck.info/js/bootstrap.min-3.3.5.js"></script>



<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//owulveryck.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="https://blog.owulveryck.info/js/highlight.pack.js"></script>
<script src="https://blog.owulveryck.info/js/site.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
  var _gaq=[['_setAccount','UA-69673850-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>


  </body>
</html>

