<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bdd on Olivier Wulveryck&#39;s Tech Blog</title>
    <link>http://dev.owulveryck.info/blog/topics/bdd/</link>
    <description>Recent content in Bdd on Olivier Wulveryck&#39;s Tech Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <managingEditor>olivier.wulveryck@gmail.com (Olivier Wulveryck)</managingEditor>
    <webMaster>olivier.wulveryck@gmail.com (Olivier Wulveryck)</webMaster>
    <copyright>All rights reserved - 2015</copyright>
    <lastBuildDate>Thu, 31 Mar 2016 23:39:35 +0100</lastBuildDate>
    <atom:link href="http://dev.owulveryck.info/blog/topics/bdd/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Behaviour Driven Development with Gherkin and Cucumber (an introduction)</title>
      <link>http://dev.owulveryck.info/blog/2016/03/31/behaviour-driven-development-with-gherkin-and-cucumber-an-introduction/</link>
      <pubDate>Thu, 31 Mar 2016 23:39:35 +0100</pubDate>
      <author>olivier.wulveryck@gmail.com (Olivier Wulveryck)</author>
      <guid>http://dev.owulveryck.info/blog/2016/03/31/behaviour-driven-development-with-gherkin-and-cucumber-an-introduction/</guid>
      <description>

&lt;h4 id=&#34;opening-remarks:7984b822e668ba97556d3e033abc0938&#34;&gt;Opening remarks&lt;/h4&gt;

&lt;p&gt;All my previous posts were about choreography, deployment, topology, and more recently about an attempt to include &lt;em&gt;AI&lt;/em&gt; in those systems.
This post is a bit apart, because I&amp;rsquo;m facing a new challenge in my job which is to implement BDD in a &lt;em&gt;CI&lt;/em&gt; chain. Therefore, I&amp;rsquo;m using
this blog as a reminder of what I did personally. The following of the &lt;em&gt;Markov&lt;/em&gt; saga will come again later.&lt;/p&gt;

&lt;h1 id=&#34;introduction:7984b822e668ba97556d3e033abc0938&#34;&gt;Introduction&lt;/h1&gt;

&lt;p&gt;Wikipedia defines the word contract like this:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A contract is a voluntary arrangement between two or more parties that is enforceable at law as a binding legal agreement.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;If law usually describes what you can and cannot do, a contract is more likely to describe what&amp;rsquo;s you are expected to do.&lt;/p&gt;

&lt;p&gt;A law&amp;rsquo;s goal is not only to give rules to follow,
but also to maintain a stability in an ecosystem.
In IT there are laws, that may be implicit, didactic, empiric, &amp;hellip; but the IT with all its laws should not
dictate the expected behavior of the customer. But how often have you heard:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;those computer stuffs are not for me, just get the thing done&amp;rdquo;&lt;/p&gt;

&lt;p&gt;&amp;ldquo;we&amp;rsquo;ve always done it this way&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;There are laws that cannot be changed, but the contract between a customer and its provider could and should evolve.&lt;/p&gt;

&lt;p&gt;In IT, like everywhere else where a customer/provider relationship exists, a special need is formalized via specifications.
Specifications are hard to follow, but even more they&amp;rsquo;re hard to evaluate.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;http://imgs.xkcd.com/comics/babies.png&#34; alt=&#34;Babies (xkcd)&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;B&lt;/strong&gt;ehavior &lt;strong&gt;D&lt;/strong&gt;riven &lt;strong&gt;D&lt;/strong&gt;evelopment is the assurance that everything have been made respectfully i
with the contract Â²that has been established between the parties (customers and providers).
To do things right, this contract should be established at the very beginning.&lt;/p&gt;

&lt;p&gt;Hence, every single item must be developed with all the &lt;em&gt;features&lt;/em&gt; of the contract in mind. And then, it should be
possible to use automation to perform the tests of behaviour, so that the developer can see if the contract is fulfilled, and if, for
example, no regression has been introduced.&lt;/p&gt;

&lt;p&gt;In a continuous integration chain, this is an essential piece that can be use to fully automate the process of delivery.&lt;/p&gt;

&lt;h2 id=&#34;gherkin:7984b822e668ba97556d3e033abc0938&#34;&gt;Gherkin&lt;/h2&gt;

&lt;p&gt;To express the specification in a way that can be both human and computer readable, the easiest way is to use a special dedicated
language.&lt;/p&gt;

&lt;p&gt;Such a language is known as &lt;a href=&#34;https://en.wikipedia.org/wiki/Domain-specific_language&#34;&gt;DSL&lt;/a&gt; ( Domain Specific Language).&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/cucumber/cucumber/wiki/Gherkin&#34;&gt;Gherkin&lt;/a&gt; is a DSL that &lt;em&gt;lets you describe software&amp;rsquo;s behaviour without dealing how that behaviour
is implemented&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The behaviour is a scenario detailed as a set of &lt;em&gt;features&lt;/em&gt;. A feature is a human readable English
(or another human language among 37 implemented languages) text file with a bunch of key words in it (eg: &lt;strong&gt;Given&lt;/strong&gt;, &lt;strong&gt;And&lt;/strong&gt;, &lt;strong&gt;When&lt;/strong&gt;, &lt;strong&gt;Then&lt;/strong&gt;,&amp;hellip;).
Those words do not only help the writer of the feature to organize its idea, but they are used by the Gherkin processor to localize the
test of the feature in the code. Of course, there is no magic in it: the test must have been implemented manually.&lt;/p&gt;

&lt;h2 id=&#34;and-here-comes-cucumber:7984b822e668ba97556d3e033abc0938&#34;&gt;And here comes Cucumber&lt;/h2&gt;

&lt;p&gt;The historic Gherkin processor is called Cucumber. It&amp;rsquo;s a Ruby implementation of the Gherkin DSL.
Its purpose is to read a scenario, and to localize the Ruby code that is implementing the all the tests corresponding to the scenario.
Finally it executes the code, and for each feature it simply says ok or ko.&lt;/p&gt;

&lt;p&gt;Easy.&lt;/p&gt;

&lt;p&gt;Nowadays there are many implementation of Gherkin parser for different languages, but in this post I will stick to the Cucumber.&lt;/p&gt;

&lt;h1 id=&#34;let-s-play:7984b822e668ba97556d3e033abc0938&#34;&gt;Let&amp;rsquo;s play&lt;/h1&gt;

&lt;p&gt;Let&amp;rsquo;s see how we can implement a basic behaviour driver development with the help of cucumber and Ruby.
The idea here is not to test a Ruby development, but instead to use ruby to validate a shell script.
That&amp;rsquo;s the main reason why I stick to Ruby (instead of GO which I know better). The Go implementation
(&lt;a href=&#34;https://github.com/DATA-DOG/godog&#34;&gt;GoDoc&lt;/a&gt;, &lt;a href=&#34;https://github.com/smartystreets/goconvey&#34;&gt;GoConvey&lt;/a&gt;, &amp;hellip;) relies
on &lt;code&gt;go test&lt;/code&gt; and therefore are related to a pure GO development.
Of course I could do a complete GO development to encapsulate my scripts, but that&amp;rsquo;s not the point; for my purpose, a scripting
language is a better choice.&lt;/p&gt;

&lt;p&gt;Ruby is a scripting language and all the tests implemented here are neither dependent on the Ruby test framework nor on &lt;a href=&#34;http://rspec.info/&#34;&gt;RSpec&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I will write a script that will deploy an EC2 instance via vagrant-aws and install an Openvpn instance on it.&lt;/p&gt;

&lt;h2 id=&#34;the-scenario:7984b822e668ba97556d3e033abc0938&#34;&gt;The scenario&lt;/h2&gt;

&lt;h4 id=&#34;the-customer-point-of-view:7984b822e668ba97556d3e033abc0938&#34;&gt;The customer point of view&lt;/h4&gt;

&lt;p&gt;With my role of customer, the feature I&amp;rsquo;m expecting is:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Given the execution of the program, and waiting for it to be successful&lt;/li&gt;
&lt;li&gt;Then I may be able to watch netflix US from France.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The feature may be:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-gherkin&#34;&gt;Feature: I want a program that
  will simply allows me to watch netflix US

  Scenario: I want to watch netflix
     Given I am on my chromebook
     And I have access to the shell
     When I want to watch netflix
     And I launch a program from the command line
     And it displays ready
     Then I open a navigator windows on http://www.netflix.com
     And I can watch Grey&#39;s anatomy (which is not available in france)
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;the-architect-point-of-view:7984b822e668ba97556d3e033abc0938&#34;&gt;The architect point of view&lt;/h4&gt;

&lt;p&gt;As an architect the implementation I&amp;rsquo;m thinking of is&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;start an EC2 instance (I will not create it in this post)&lt;/li&gt;
&lt;li&gt;register it to my DNS (with blog-test.owulveryck.info)&lt;/li&gt;
&lt;li&gt;install Openvpn&lt;/li&gt;
&lt;li&gt;configure Openvpn to make it accessible via blog-test.owulveryck.info&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;the-developer-point-of-view:7984b822e668ba97556d3e033abc0938&#34;&gt;The developer point of view&lt;/h4&gt;

&lt;p&gt;And as a developer, I&amp;rsquo;m thinking about using &lt;a href=&#34;https://github.com/mitchellh/vagrant-aws&#34;&gt;vagrant-aws&lt;/a&gt; to perform the tasks.
All the implementation will be based on a Vagrant file and a provisioning script.
The vagrant file will be evaluated by &lt;code&gt;vagrant up&lt;/code&gt; on CLI (aka in the real world, by the end user) and
the same vagrant file will be evaluated within my cucumber scripts.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Therefore I can say that I am doing BDD/TDD for a configuration management and provisioning.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&#34;the-basic-feature:7984b822e668ba97556d3e033abc0938&#34;&gt;The basic &lt;em&gt;feature&lt;/em&gt;&lt;/h2&gt;

&lt;p&gt;I will describe here a single feature, just for testing purpose.&lt;/p&gt;

&lt;h2 id=&#34;setting-up-the-ruby-environment:7984b822e668ba97556d3e033abc0938&#34;&gt;Setting up the Ruby environment&lt;/h2&gt;

&lt;p&gt;I will use the &lt;em&gt;Ruby&lt;/em&gt; implementation of cucumber.
To install it, assuming that we have a &lt;code&gt;gem&lt;/code&gt; installed, just run this command&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# gem install cucumber
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This will load all the required dependencies.
It may also be a good idea to use &lt;code&gt;bundle&lt;/code&gt; if we plan to do further development of the steps in ruby.&lt;/p&gt;

&lt;h4 id=&#34;the-test-environment-with-bundler:7984b822e668ba97556d3e033abc0938&#34;&gt;The test environment with bundler&lt;/h4&gt;

&lt;p&gt;The whole development will run with the help of bundler (and RVM).
See this &lt;a href=&#34;http://dev.owulveryck.info/blog/2016/03/31/rvm-from-a-usb-stick-on-a-chromebook/&#34;&gt;post&lt;/a&gt; for more explanation on
how I set it up on my Chromebook.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;&amp;gt; mkdir /media/removable/Lexar/tools/vpn-blog
&amp;gt; cd /media/removable/Lexar/tools/vpn-blog
&amp;gt; rvmrc --create 2.2.0@vpn-blog
&amp;gt; source .rvmrc
&amp;gt; gem install bundler -v 1.5.2 
&amp;gt; bundle init
Writing new Gemfile to /home/chronos/user/gherkin/Gemfile
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;the-gemfile:7984b822e668ba97556d3e033abc0938&#34;&gt;the &lt;em&gt;Gemfile&lt;/em&gt;&lt;/h4&gt;

&lt;p&gt;Let&amp;rsquo;s add the cucumber, vagrant (as installed in a previous &lt;a href=&#34;http://dev.owulveryck.info/blog/2016/03/31/rvm-from-a-usb-stick-on-a-chromebook/&#34;&gt;post&lt;/a&gt; ),
and vagrant-aws dependencies in the Gemfile:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;&amp;gt; cat Gemfile
source &amp;quot;https://rubygems.org&amp;quot;

gem &amp;quot;vagrant&amp;quot;, :path =&amp;gt; &amp;quot;/media/removable/Lexar/tools/vagrant&amp;quot;
gem &amp;quot;vagrant-aws&amp;quot;
gem &amp;quot;bundler&amp;quot;, &amp;quot;1.5.2&amp;quot;
gem &amp;quot;cucumber&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and then &lt;em&gt;install&lt;/em&gt; the bundle:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;&amp;gt; bundle _1.5.2_ install
Resolving dependencies...
Using builder 3.2.2
Using gherkin 3.2.0
Using cucumber-wire 0.0.1
Using diff-lcs 1.2.4
Using multi_json 1.7.9
Using multi_test 0.1.2
Using bundler 1.11.2
Using cucumber-core 1.4.0
Using cucumber 2.3.3
...
Bundle complete! 1 Gemfile dependency, 9 gems now installed.
Use `bundle show [gemname]` to see where a bundled gem is installed.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And now let&amp;rsquo;s run cucumber within the bundle:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;&amp;gt; bundle _1.5.2_ exec cucumber
No such file or directory - features. You can use `cucumber --init` to get started.
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;the-skeleton-of-the-test:7984b822e668ba97556d3e033abc0938&#34;&gt;The skeleton of the test&lt;/h3&gt;

&lt;p&gt;First, as requested by cucumber, let&amp;rsquo;s initialize a couple of files in the directory to be &amp;ldquo;cucumber compliant&amp;rdquo;.
Cucumber do have a helpful &lt;em&gt;init&lt;/em&gt; function. Let&amp;rsquo;s run it now:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;bundle _1.5.2_ exec cucumber --init
  create   features
  create   features/step_definitions
  create   features/support
  create   features/support/env.rb
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;adding-the-feature-file:7984b822e668ba97556d3e033abc0938&#34;&gt;Adding the &lt;em&gt;feature&lt;/em&gt; file&lt;/h4&gt;

&lt;p&gt;In the &lt;em&gt;features/&lt;/em&gt; directory, I create a file &lt;code&gt;basic_feature.feature&lt;/code&gt; which contains the YAML we wrote earlier, then I run cucumber again.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ bundle _1.5.2_ exec cucumber
Feature: I want a program that
  will simply allows me to watch netflix US
  
  Scenario: I want to watch netflix                                   # features/basic_feature.feature:4
    Given I am on my chromebook                                       # features/basic_feature.feature:5
    And I have access to the shell                                    # features/basic_feature.feature:6
    When I want to watch netflix                                      # features/basic_feature.feature:7
    And I launch a program on the command line                        # features/basic_feature.feature:8
    And it displays ready                                             # features/basic_feature.feature:9
    Then I open a navigator windows on http://www.netflix.com         # features/basic_feature.feature:10
    And I can watch Grey&#39;s anatomy (which is not available in france) # features/basic_feature.feature:11
                                
1 scenario (1 undefined)
7 steps (7 undefined)
0m0.054s

You can implement step definitions for undefined steps with these snippets:

Given(/^I am on my chromebook$/) do
  pending # Write code here that turns the phrase above into concrete actions
end
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We notice that the feature has been read and understood correctly by cucumber.
ON top of that Cucumber gives the skeleton of a ruby implementation for the tests.&lt;/p&gt;

&lt;p&gt;I will copy all the ruby code in its own file:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;# cat &amp;gt; features/step_definitions/tests.rb
Given(/^I am on my chromebook$/) do
  pending # Write code here that turns the phrase above into concrete actions
  end
...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And run cucumber once more:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;Feature: I want a program that
  will simply allows me to watch netflix US

  Scenario: I want to watch netflix                                   # features/basic_feature.feature:4
      Given I am on my chromebook                                       # features/step_definitions/tests.rb:1
        TODO (Cucumber::Pending)
        ./features/step_definitions/tests.rb:2:in `/^I am on my chromebook$/&#39;
        features/basic_feature.feature:5:in `Given I am on my chromebook&#39;
      And I have access to the shell                                    # features/step_definitions/tests.rb:5
      When I want to watch netflix                                      # features/step_definitions/tests.rb:9
      And I launch gonetflix.sh                                         # features/step_definitions/tests.rb:13
      And it displays ready                                             # features/step_definitions/tests.rb:17
      Then I open a navigator windows on http://www.netflix.com         # features/step_definitions/tests.rb:21
      And I can watch Grey&#39;s anatomy (which is not available in france) # features/step_definitions/tests.rb:25
      
1 scenario (1 pending)
7 steps (6 skipped, 1 pending)
0m0.041s`
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Cool, the framework is ok. Now let&amp;rsquo;s actually implement the scenario and the tests&lt;/p&gt;

&lt;h4 id=&#34;implementation-of-the-given-keywords:7984b822e668ba97556d3e033abc0938&#34;&gt;Implementation of the &amp;ldquo;Given&amp;rdquo; keywords&lt;/h4&gt;

&lt;p&gt;There is not much to say about the Given keyword. I can test that I am really on my Chromebook but that does not make any sense.
I will skip this test by not implementing anything in the function.&lt;/p&gt;

&lt;h4 id=&#34;implementation-of-the-when-keyword:7984b822e668ba97556d3e033abc0938&#34;&gt;Implementation of the &amp;ldquo;When&amp;rdquo; keyword&lt;/h4&gt;

&lt;p&gt;The actual execution of the &amp;ldquo;When&amp;rdquo; is the execution of the Vagrant file.
It will start the EC2 instance and provision the VPN
I also need to mount the VPN locally afterwards&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;#!/usr/bin/env ruby
require &amp;quot;vagrant&amp;quot;

# Starting the EC2 instance (running the vagrantfile)
env = Vagrant::Environment.new
env.cli(&amp;quot;up&amp;quot;)
# Starting OpenVPN locally
`sudo openvpn --mktun --dev tun0 &amp;amp;&amp;amp; sudo openvpn --config ~/Downloads/client.ovpn --dev tun0`
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;trying-to-implement-the-netflix-test-with-selenium:7984b822e668ba97556d3e033abc0938&#34;&gt;(trying to) Implement the netflix test with selenium&lt;/h4&gt;

&lt;p&gt;To test the access, instead of faking my browser with curl, I will use the &lt;em&gt;selenium&lt;/em&gt; tool.
So I add it to my &lt;em&gt;Gemfile&lt;/em&gt; and &lt;code&gt;bundle update&lt;/code&gt; it (informations comes from &lt;a href=&#34;https://github.com/jonathanchrisp/selenium-cucumber-ruby-kickstarter&#34;&gt;this starterkit&lt;/a&gt;):&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ echo &#39;gem &amp;quot;selenium-cucumber&amp;quot;&#39; &amp;gt;&amp;gt; Gemfile
$ echo &#39;gem &amp;quot;selenium-webdriver&amp;quot;&#39; &amp;gt;&amp;gt; Gemfile
$ echo &#39;gem &amp;quot;require_all&amp;quot;&#39; &amp;gt;&amp;gt; Gemfile
$ bundle _1.5.2_ update 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then I need to create a special file in the &lt;code&gt;support&lt;/code&gt; subdirectory to define a bunch of objects:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;# cat features/support/env.rb
require &#39;selenium-webdriver&#39;
require &#39;cucumber&#39;

require &#39;require_all&#39;

require_all &#39;lib&#39;

Before do |scenario|
    @browser = Browser.new(ENV[&#39;DRIVER&#39;])
    @browser.delete_cookies
end

After do |scenario|
    @browser.driver.quit
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I&amp;rsquo;m also adding the files from the starterkit in the &lt;code&gt;lib&lt;/code&gt; subdirectory.&lt;/p&gt;

&lt;p&gt;As I am developing on my Chromebook, I also need the &lt;a href=&#34;https://sites.google.com/a/chromium.org/chromedriver/&#34;&gt;chromedriver&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Too bad&lt;/strong&gt; chromedriver relies on the libX11 that cannot be installed on my Chromebook / &lt;strong&gt;end of show for selenium&lt;/strong&gt;
on the Chromebook&amp;hellip;  for now&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Note&lt;/em&gt; I will continue with the development, but be aware that I won&amp;rsquo;t be able to test it until I am on a true linux box with
the chromedriver installed&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;Then(/^I open a navigator windows on (.*?)$/) do |arg1|
  @browser.open_page(&amp;quot;http://www.netflix.com&amp;quot;)
end

Then(/^I can watch Grey&#39;s anatomy \(which is not available in france\)$/) do
  @browser.open_page(&amp;quot;http://www.netflix.com/idtogreysanatomy&amp;quot;)
end
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;the-actual-implementation-of-the-scenario:7984b822e668ba97556d3e033abc0938&#34;&gt;The actual implementation of the scenario&lt;/h3&gt;

&lt;p&gt;What I need to do is to implement the scenario. Not the test scenario, the real one;
the one that will actually allows me to launch my ec2 instance, configure and start Openvpn.&lt;/p&gt;

&lt;p&gt;As I said before, I will use vagrant-aws to do so.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; vagrant was depending on &lt;em&gt;bsdtar&lt;/em&gt;, and I&amp;rsquo;ve had to install it manually from source:&lt;/p&gt;

&lt;p&gt;(&lt;code&gt;tar xzvf libarchive-3.1.2.tar.gz &amp;amp;&amp;amp; ... &amp;amp;&amp;amp; ./configure --prefix=/usr/local &amp;amp;&amp;amp; make install clean&lt;/code&gt;)&lt;/p&gt;

&lt;h4 id=&#34;installing-vagrant-aws-plugin:7984b822e668ba97556d3e033abc0938&#34;&gt;Installing vagrant-aws plugin&lt;/h4&gt;

&lt;p&gt;The vagrant-aws plugin has been installed by the bundler because I&amp;rsquo;ve indicated it as a dependency in the Gemfile.
But, I will have to have it as a requirement in the Vagrantfile because I&amp;rsquo;m not using the &amp;ldquo;official vagrant&amp;rdquo; and that
I am running in a bundler environment:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Vagrant&amp;rsquo;s built-in bundler management mechanism is disabled because
Vagrant is running in an external bundler environment. In these
cases, plugin management does not work with Vagrant. To install
plugins, use your own Gemfile. To load plugins, either put the
plugins in the &lt;code&gt;plugins&lt;/code&gt; group in your Gemfile or manually require
them in a Vagrantfile.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;installing-the-base-box:7984b822e668ba97556d3e033abc0938&#34;&gt;Installing the base box&lt;/h4&gt;

&lt;p&gt;The documentation says that the quickest way to get started is to install the dummy box.
That&amp;rsquo;s what I did:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ bundle _1.5.2_ exec vagrant box add dummy https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box
...
==&amp;gt; box: Successfully added box &#39;dummy&#39; (v0) for &#39;aws&#39;!
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;the-vagrantfile:7984b822e668ba97556d3e033abc0938&#34;&gt;The Vagrantfile&lt;/h4&gt;

&lt;p&gt;The initial Vagrantfile looks like this:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;require &amp;quot;vagrant-aws&amp;quot;
Vagrant.configure(&amp;quot;2&amp;quot;) do |config|
  config.vm.box = &amp;quot;dummy&amp;quot;

  config.vm.provider :aws do |aws, override|
    aws.access_key_id = &amp;quot;YOUR KEY&amp;quot;
    aws.secret_access_key = &amp;quot;YOUR SECRET KEY&amp;quot;
    aws.session_token = &amp;quot;SESSION TOKEN&amp;quot;
    aws.keypair_name = &amp;quot;KEYPAIR NAME&amp;quot;

    aws.ami = &amp;quot;ami-7747d01e&amp;quot;

    override.ssh.username = &amp;quot;ubuntu&amp;quot;
    override.ssh.private_key_path = &amp;quot;PATH TO YOUR PRIVATE KEY&amp;quot;
  end
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;So all the rest in the basic implementation of the vagrant file and the provisioning.sh for the Openvpn configuration.
but that goes far behind the topic of this post which was to introduce myself to BDD and TDD.&lt;/p&gt;

&lt;h1 id=&#34;conclusion:7984b822e668ba97556d3e033abc0938&#34;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;I&amp;rsquo;ve learned a lot about the ruby and cucumber environment in this post.
Too bad I couldn&amp;rsquo;t end with a fully running example because of my Chromebook.&lt;/p&gt;

&lt;p&gt;Anyway the expected results were for me to:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;learn about BDD&lt;/li&gt;
&lt;li&gt;learn about cucumber&lt;/li&gt;
&lt;li&gt;learn about Ruby&lt;/li&gt;
&lt;li&gt;learn about vagrant&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I can say that I&amp;rsquo;ve reach my goals anyway. I will try to finish the implementation on a true Linux box locally, or on my
Macbook if I have time to do so.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>