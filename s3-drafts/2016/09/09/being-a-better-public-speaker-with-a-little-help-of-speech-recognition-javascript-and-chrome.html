<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

<meta property="og:title" content="Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome" />
<meta property="og:description" content="People who know what they are talking about don&#39;t need Powerpoint said Steve Jobs. Indeed, it may be useful from time to time to have a single slide to display key words. But what I understand from Jobs&#39;s sentence is that relying on the slides is a bad idea. Good stuff that machine learning can pilot the slides for us!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.owulveryck.info/2016/09/09/being-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome.html" />



<meta property="article:published_time" content="2016-09-09T13:39:50&#43;02:00"/>

<meta property="article:modified_time" content="2016-09-09T13:39:50&#43;02:00"/>












<meta itemprop="name" content="Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome">
<meta itemprop="description" content="People who know what they are talking about don&#39;t need Powerpoint said Steve Jobs. Indeed, it may be useful from time to time to have a single slide to display key words. But what I understand from Jobs&#39;s sentence is that relying on the slides is a bad idea. Good stuff that machine learning can pilot the slides for us!">


<meta itemprop="datePublished" content="2016-09-09T13:39:50&#43;02:00" />
<meta itemprop="dateModified" content="2016-09-09T13:39:50&#43;02:00" />
<meta itemprop="wordCount" content="866">



<meta itemprop="keywords" content="chrome,speech recognition,Javascript,revealjs,slides," />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome"/>
<meta name="twitter:description" content="People who know what they are talking about don&#39;t need Powerpoint said Steve Jobs. Indeed, it may be useful from time to time to have a single slide to display key words. But what I understand from Jobs&#39;s sentence is that relying on the slides is a bad idea. Good stuff that machine learning can pilot the slides for us!"/>
<meta name="twitter:site" content="@owulveryck"/>








<meta name="generator" content="Hugo 0.31.1" />


    <link rel="canonical" href="https://blog.owulveryck.info/2016/09/09/being-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome.html">

    <title>Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome | Unladen swallow</title>
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />


    <!-- combined, minified CSS -->
    <link href="https://blog.owulveryck.info/css/syntax.css" rel="stylesheet">
    <link href="https://blog.owulveryck.info/css/style.css" rel="stylesheet">
    <link href="https://blog.owulveryck.info/css/custom.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Pacifico|Cormorant+Garamond|Open+Sans" rel="stylesheet">

    

    
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-69673850-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


    

    
<script src='//cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
<script type="text/x-mathjax-config"> MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}}); </script>


  </head>

  <body>

    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="https://blog.owulveryck.info/">Home</a>
          
          
          <a class="nav-link" href="https://blog.owulveryck.info/about.html">About me</a>
          
          
        </nav>
      </div>
    </div>

    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title"><a href="https://blog.owulveryck.info/" rel="home">Unladen swallow</a></h1>
        <p class="lead blog-description">Olivier Wulveryck&rsquo;s (tech) blog</p>
      </div>
    </header>

    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
  <div class="container">
  <div class="row">
    <div class="col-sm-10">
    <h2 class="blog-post-title"><a href="https://blog.owulveryck.info/2016/09/09/being-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome.html">Being a better public speaker with a little help of Speech Recognition, Javascript and Chrome</a></h2>
    <p class="blog-post-meta"><time datetime="2016-09-09T13:39:50&#43;02:00">Fri Sep 9, 2016</time> by Olivier Wulveryck in 

<i class="fa fa-tag" aria-hidden="true"></i>&nbsp;<a href="/tags/chrome" rel="tag">chrome</a>, <a href="/tags/speech-recognition" rel="tag">speech recognition</a>, <a href="/tags/javascript" rel="tag">Javascript</a>, <a href="/tags/revealjs" rel="tag">revealjs</a>, <a href="/tags/slides" rel="tag">slides</a>

</p>
    </div>
    <div class="col-sm-2 frame-round">
  <a href='https://blog.owulveryck.info/2016/09/09/being-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome.html'>
      
    </a>
    </div>

    </div>
  </div>

  </header>

  

<h1 id="introduction">Introduction</h1>

<p>I usually don&rsquo;t like slidewares.</p>

<p>Actually as IT engineer working, by now, exclusively in France, I&rsquo;m facing the PowerPoint problem:</p>

<ul>
<li>Too many boring slides,</li>
<li>too much information per slide,</li>
<li>a presenter dedicated to read their content.</li>
</ul>

<p>Therefore, the audience is watching its watch while waiting for a coffee break.</p>

<p>I won&rsquo;t redo the introduction I already did in a <a href="/2016/06/23/websockets-reveal.js-d3-and-go-for-a-dynamic-keynote/index.html">previous post</a> but indeed slides can,
from time to time, be a value-add to a presentation.</p>

<p>Is the previous post, I introduced reveal.js, this excellent javascript framework. And I already did an interactive presentation.</p>

<p>In this post, I will go a little bit further with the integration of Speech Recognition.</p>

<h1 id="speech-recognition-by-google">Speech Recognition by Google</h1>

<h2 id="the-google-cloud-speech-api">The Google Cloud Speech API</h2>

<p>It ain&rsquo;t no secret now, I&rsquo;m a big fan of machine learning.
Machines learn faster than people, and they can now assist us in a lot of boring tasks.</p>

<p>On the base of a neuron network, Google provides an <a href="https://cloud.google.com/speech/">API for speech recognition</a>.
It is fairly complete and multi lingual.</p>

<h2 id="chrome-speech-recognition">Chrome speech recognition</h2>

<p>They &ldquo;<em>eat their own dog food</em>&rdquo; and use their engine for android and&hellip; Chrome.
Best of all, they provide a userland access via a Javascript API to this functionality in Chrome.</p>

<p>This means that you can develop a web page that will access you microphone, sends what you say to the Google cloud, get the result back and process it in your page.</p>

<p>You can see an introduction <a href="https://developers.google.com/web/updates/2013/01/Voice-Driven-Web-Apps-Introduction-to-the-Web-Speech-API">here</a></p>

<h1 id="what-can-i-use-that-for-a-case-study">What can I use that for: A case study?</h1>

<p>I had to do a presentation recently.
This presentation was about <em>Agility</em> and <em>Devops</em>. The main idea was to give my client a feedback about experiences I had regarding those principles in digital transformation.</p>

<p>I didn&rsquo;t want to loose my audience with slides. But I wanted to keep the key concepts alive and visible.</p>

<p>So what I did was a one slide presentation only with the keywords I wanted to talk about.</p>

<p>The day before, I though:</p>

<blockquote>
<p>&ldquo;How nice it would be if as far as I speak, the key concepts would appear on screen&hellip;&rdquo;</p>
</blockquote>

<p>You may think: <em>&ldquo;that&rsquo;s easy, learn your script and click on the right moment&rdquo;</em>.</p>

<p>Ok, but there are drawbacks:</p>

<ul>
<li>You have to learn the script</li>
<li>You cannot be spontaneous anymore</li>
<li>It&rsquo;s a one shot, one displayed, you cannot interact with the points anymore.</li>
</ul>

<p>What I need is &ldquo;an assistant&rdquo; that will <em>listen to me</em> and <em>act as soon as he/she/it hear a buzz word</em>.
It&rsquo;s 2016, this assistant is a machine, and I can teach it to act correctly.</p>

<p>Here is a little demo of the end product (don&rsquo;t pay to much attention to the content, I said nonsense for the demo)</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/MOmmBufEwPo" frameborder="0" allowfullscreen></iframe>

<p>And another one in French.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/3Uyr0G0add4" frameborder="0" allowfullscreen></iframe>

<h1 id="the-implementation">The implementation</h1>

<h2 id="annyang">Annyang</h2>

<p>I have used the <a href="https://github.com/TalAter/annyang">annyang</a> which is a javascript wrapper for the Chrome speech recognition functionnality.</p>

<p>Instead of matching a sentence as explained in the example of annyang, I made it listen to my whole speech in a loop.
Then I passed every sentence detected by the framework to a javascript function that was applying regexp to look for keywords.</p>

<h3 id="displaying-words">Displaying words</h3>

<p>For every keyword I did a match to an object of my DOM and simply changed its <code>visibility</code> style from <code>hidden</code> to <code>visible</code></p>

<p>Here is the javascript code:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">if</span> <span class="p">(</span><span class="nx">annyang</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">annyang</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="nx">annyang</span><span class="p">.</span><span class="nx">setLanguage</span><span class="p">(</span><span class="s1">&#39;fr-FR&#39;</span><span class="p">);</span>
  <span class="nx">annyang</span><span class="p">.</span><span class="nx">addCallback</span><span class="p">(</span><span class="s1">&#39;result&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">phrases</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">s</span> <span class="k">of</span> <span class="nx">phrases</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">str</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
     <span class="k">switch</span> <span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/communication/</span><span class="p">)</span> <span class="o">||</span> <span class="p">{}).</span><span class="nx">input</span><span class="o">:</span><span class="nx">nnyang</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>                                                                                              
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;communication&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">=</span> <span class="s1">&#39;visible&#39;</span><span class="p">;</span>
        <span class="p">...</span>
    <span class="c1">// Start listening. You can call this here, or attach this call to an event, button, etc.
</span><span class="c1"></span>    <span class="nx">annyang</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>       
    <span class="p">...</span></code></pre></div>
<p>And the corresponding html section for the communication keyword:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;reveal&#34;</span><span class="p"></span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;slides&#34;</span><span class="p"></span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">section</span><span class="p"></span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;visibility: visible&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;agile&#34;</span><span class="p"></span><span class="p">&gt;</span>Agile<span class="p">&lt;</span><span class="p">/</span><span class="nt">h3</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">p</span><span class="p"></span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;visibility: hidden;&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;communication&#34;</span><span class="p"></span><span class="p">&gt;</span>communication<span class="p">&lt;</span><span class="p">/</span><span class="nt">span</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="p">/</span><span class="nt">p</span><span class="p">&gt;</span>            </code></pre></div>
<p>The speech recognition engine detects the sentence and gives a confidence note about its recognition.
All the potential results are stored in an array (here <code>phrases</code>). I&rsquo;ve used them all so I was more confident not to miss a word.</p>

<h3 id="making-them-blink">Making them blink</h3>

<p>As I was not fully confident in the solution (it was late in the night and the show was the next morning), Therefore I made a fall-back solution.
All the words were displayed, and I used a little CSS tweak to make them blink when they were pronounced.
This was done by adding and removing a css class to the concerned node.
The logic remains the same.</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="c">/* Chrome &amp; Safari */</span>
<span class="p">@</span><span class="k">-webkit-keyframes</span> <span class="nt">blink</span> <span class="p">{</span>
  <span class="nt">from</span> <span class="p">{</span>
    <span class="k">opacity</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nt">to</span> <span class="p">{</span>
    <span class="k">opacity</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">blink</span> <span class="p">{</span>
  <span class="kp">-webkit-</span><span class="k">animation</span><span class="p">:</span> <span class="kc">blink</span> <span class="mi">750</span><span class="kt">ms</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-Javascript" data-lang="Javascript">case (str.match(/communication/) || {}).input:                                                                                       
   document.getElementById(&#34;b_communication&#34;).classList.toggle(&#39;blink&#39;);
   setTimeout(function () {
     document.getElementById(&#34;b_communication&#34;).classList.remove(&#39;blink&#39;);
   }, 1500);
   break;</code></pre></div>
<h1 id="conclusion-and-todo">Conclusion and TODO</h1>

<p>The speech recognition engine is efficient and usable.
What I need to do is to code a tiny javascript library in order to get a JSON associative array between the list of spoken words that would trigger an action for an element for example:</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;tag&#34;</span><span class="p">:</span> <span class="s2">&#34;communication&#34;</span><span class="p">,</span>
  <span class="nt">&#34;words&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;communication&#34;</span><span class="p">,</span> <span class="s2">&#34;communicate&#34;</span><span class="p">],</span>
  <span class="nt">&#34;fuction&#34;</span><span class="p">:</span> <span class="s2">&#34;blink&#34;</span>
<span class="p">}</span></code></pre></div>
<p>Anyway, as a quick and dirty solution, the goal is achieved.</p>

<p>Another Idea would be to plug this with a NLP engine to perform stemming or lemmatization to do a better decoding and be even more machine learning compliant. This could be done with the help of <a href="https://github.com/mit-nlp/MITIE">MITIE</a></p>


  
  
  <hr>
<footer>
  <header>
    <h4>Share</h4>
  </header>
  <nav class="nav nav-inline">
    <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.owulveryck.info%2f2016%2f09%2f09%2fbeing-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome.html" title="Share on Facebook"><span class="fa fa-facebook fa-2x" aria-hidden="true"></span></a>
    <a class="nav-item" href="https://plus.google.com/share?url=https%3a%2f%2fblog.owulveryck.info%2f2016%2f09%2f09%2fbeing-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome.html" title="Share on Google+"><span class="fa fa-google-plus fa-2x" aria-hidden="true"></span></a>
    <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.owulveryck.info%2f2016%2f09%2f09%2fbeing-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome.html" title="Share on LinkedIn"><span class="fa fa-linkedin fa-2x" aria-hidden="true"></span></a>
    <a class="nav-item" href="https://twitter.com/home?status=https%3a%2f%2fblog.owulveryck.info%2f2016%2f09%2f09%2fbeing-a-better-public-speaker-with-a-little-help-of-speech-recognition-javascript-and-chrome.html" title="Tweet this"><span class="fa fa-twitter fa-2x"></span></a>
  </nav>
</footer>

  
</article> 



<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
  
  
  if (window.location.hostname == "localhost")
    return;

  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  var disqus_shortname = 'owulveryck';
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>





        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 offset-sm-1 blog-sidebar">
  
  <section class="sidebar-module sidebar-module-inset">
    <h4>About</h4>
    <p>This is a place where I share my technical experiences alongside my life of IT professional<br> Because even finding the air-speed velocity of an unladen swallow can be fun.<br><br> <strong>Sir Bedevere</strong>: <em>How do know so much about swallows?</em><br><strong>King Arthur</strong>: <em>Well, you have to know these things when you&rsquo;re a king, you know.</em><br><br><em>Monty Python and the Holy Grail</em></p>
  </section>
  

  

  <section class="sidebar-module">
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">
      
      <li><a href="/2017/12/18/parsing-mathematical-equation-to-generate-computation-graphs---first-step-from-software-1.0-to-2.0-in-go.html">Parsing mathematical equation to generate computation graphs - First step from software 1.0 to 2.0 in go</a></li>
      <hr>
      
      <li><a href="/2017/10/29/about-recurrent-neural-network-shakespeare-and-go.html">About Recurrent Neural Network, Shakespeare and GO</a></li>
      <hr>
      
      <li><a href="/2017/09/12/terraform-is-hip...-introducing-nhite.html">Terraform is hip&hellip; Introducing Nhite</a></li>
      <hr>
      
      <li><a href="/2017/09/02/from-command-line-tools-to-microservices---the-example-of-hashicorp-tools-terraform-and-grpc.html">From command line tools to microservices - The example of Hashicorp tools (terraform) and gRPC</a></li>
      <hr>
      
      <li><a href="/2017/08/14/when-i-apply-a-350-update-on-the-iphone.html">When I apply a 350â‚¬ update on the iPhone</a></li>
      <hr>
      
    </ol>
  </section>

  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->

    <footer class="blog-footer">
      <p>
      
      All rights reserved - <sup>2015</sup>&frasl;<sub>2017</sub>
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>

  </body>

</html>
